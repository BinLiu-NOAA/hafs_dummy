name: Pull Request Tests
on:
  pull_request:
    branches: ['main']
    types: [assigned, opened, synchronize, reopened, labeled]
env:
  app: Accept:application/vnd.github.v3+json

jobs:
  repocheck:
    name: Check if repos are up to date
    runs-on: ubuntu-latest

    outputs:
      current: ${{ steps.check.outputs.current }}

    steps:
    - uses: actions/checkout@v2
      with:
        fetch-depth: 0

    - name: Wait for caching source
      run: sleep 10

    - name: Check if PR is up to date
      run: |
        if git merge-base --is-ancestor remotes/origin/main @; then
          echo "This pull request is up to date with the target branch."
        else
          echo "This pull request is not up to date with the target branch. Please sync it up."
          exit 1
        fi
